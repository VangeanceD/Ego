<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life RPG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0% { box-shadow: 0 0 5px rgba(0, 183, 255, 0.3); }
            50% { box-shadow: 0 0 25px rgba(0, 183, 255, 0.7); }
            100% { box-shadow: 0 0 5px rgba(0, 183, 255, 0.3); }
        }

        .pulse-glow {
            animation: pulse-glow 3s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes scale {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .animate-scale {
            animation: scale 2s ease-in-out infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .animate-rotate {
            animation: rotate 10s linear infinite;
        }

        @keyframes magic-glow {
            0% { 
                box-shadow: 0 0 5px rgba(0, 183, 255, 0.3);
                text-shadow: 0 0 5px rgba(0, 183, 255, 0.3);
            }
            50% { 
                box-shadow: 0 0 30px rgba(0, 183, 255, 0.8);
                text-shadow: 0 0 15px rgba(0, 183, 255, 0.8);
            }
            100% { 
                box-shadow: 0 0 5px rgba(0, 183, 255, 0.3);
                text-shadow: 0 0 5px rgba(0, 183, 255, 0.3);
            }
        }

        .magic-glow {
            animation: magic-glow 3s ease-in-out infinite;
        }

        @keyframes levelup-ring {
            0% {
                transform: scale(0.5);
                opacity: 0.8;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        .levelup-ring {
            position: absolute;
            border: 2px solid rgba(0, 183, 255, 0.6);
            border-radius: 50%;
            animation: levelup-ring 2s ease-out forwards;
        }

        @keyframes magic-particle-float {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) rotate(var(--r));
                opacity: 0;
            }
        }

        .magic-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.8) 0%, rgba(0, 183, 255, 0.4) 70%, transparent 100%);
            border-radius: 50%;
            animation: magic-particle-float var(--duration) ease-out forwards;
            box-shadow: 0 0 10px rgba(0, 183, 255, 0.6);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 183, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 183, 255, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 183, 255, 0.5);
        }

        .glow-text {
            text-shadow: 0 0 10px rgba(0, 183, 255, 0.5);
        }

        @keyframes borderGlow {
            0% {
                border-color: rgba(0, 183, 255, 0.3);
                box-shadow: 0 0 15px rgba(0, 183, 255, 0.3);
            }
            50% {
                border-color: rgba(0, 183, 255, 0.6);
                box-shadow: 0 0 25px rgba(0, 183, 255, 0.6);
            }
            100% {
                border-color: rgba(0, 183, 255, 0.3);
                box-shadow: 0 0 15px rgba(0, 183, 255, 0.3);
            }
        }

        .animate-border-glow {
            animation: borderGlow 3s ease-in-out infinite;
        }

        .nav-icon {
            transition: all 0.3s ease;
        }

        .nav-icon:hover {
            transform: scale(1.1);
            background-color: rgba(0, 183, 255, 0.3) !important;
        }

        .nav-icon:active {
            transform: scale(0.95);
        }

        .hidden {
            display: none;
        }

        .quest-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quest-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 183, 255, 0.2);
        }

        .quest-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 183, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quest-card:hover::before {
            opacity: 1;
        }

        .btn-primary {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            z-index: 1;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 183, 255, 0.2), transparent);
            transition: left 0.7s ease;
            z-index: -1;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .progress-bar {
            height: 8px;
            background: rgba(0, 183, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, rgba(0, 183, 255, 0.5), rgba(0, 183, 255, 0.8));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .level-badge {
            background: linear-gradient(135deg, rgba(0, 183, 255, 0.2), rgba(0, 183, 255, 0.4));
            border: 1px solid rgba(0, 183, 255, 0.3);
            box-shadow: 0 0 10px rgba(0, 183, 255, 0.2);
        }

        .stat-increase {
            animation: statIncrease 1s ease-out;
        }

        @keyframes statIncrease {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #00ffff; }
            100% { transform: scale(1); }
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: rgba(0, 183, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }

        .quest-timer {
            transition: width 1s linear;
        }

        .quest-complete-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .quest-complete-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .quest-complete-content {
            background: rgba(0, 20, 40, 0.9);
            border: 2px solid rgba(0, 183, 255, 0.5);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            max-width: 500px;
            transform: scale(0.8);
            transition: transform 0.5s ease;
            box-shadow: 0 0 30px rgba(0, 183, 255, 0.3);
        }

        .quest-complete-overlay.active .quest-complete-content {
            transform: scale(1);
        }

        .xp-gain {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #00b7ff, #00ffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .cyberpunk-border {
            position: relative;
        }

        .cyberpunk-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            width: 10px;
            height: 10px;
            border-top: 2px solid rgba(0, 183, 255, 0.8);
            border-left: 2px solid rgba(0, 183, 255, 0.8);
        }

        .cyberpunk-border::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 10px;
            height: 10px;
            border-bottom: 2px solid rgba(0, 183, 255, 0.8);
            border-right: 2px solid rgba(0, 183, 255, 0.8);
        }

        /* Solo Leveling inspired effects */
        .solo-text {
            font-family: 'Arial', sans-serif;
            font-weight: bold;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: #00b7ff;
            text-shadow: 0 0 10px rgba(0, 183, 255, 0.7);
        }

        @keyframes solo-appear {
            0% { 
                opacity: 0;
                transform: scale(0.8);
                filter: blur(10px);
            }
            100% { 
                opacity: 1;
                transform: scale(1);
                filter: blur(0);
            }
        }

        .solo-appear {
            animation: solo-appear 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        @keyframes solo-levelup-ring {
            0% {
                transform: translate(-50%, -50%) scale(0.1);
                opacity: 0.9;
                border-width: 15px;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
                border-width: 1px;
            }
        }

        .solo-levelup-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            background: rgba(0, 0, 0, 0.85);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .solo-levelup-container.active {
            opacity: 1;
            pointer-events: auto;
        }

        .solo-levelup-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 5px solid rgba(0, 183, 255, 0.7);
            transform: translate(-50%, -50%) scale(0.1);
            box-shadow: 0 0 30px rgba(0, 183, 255, 0.5), inset 0 0 30px rgba(0, 183, 255, 0.5);
        }

        .solo-levelup-text {
            font-size: 5rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px rgba(0, 183, 255, 0.8);
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s ease;
        }

        .solo-levelup-container.active .solo-levelup-text {
            opacity: 1;
            transform: scale(1);
        }

        .solo-levelup-subtext {
            font-size: 2rem;
            color: #00b7ff;
            text-shadow: 0 0 10px rgba(0, 183, 255, 0.8);
            margin-top: 1rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            transition-delay: 0.3s;
        }

        .solo-levelup-container.active .solo-levelup-subtext {
            opacity: 1;
            transform: translateY(0);
        }

        .solo-stat-increase {
            position: absolute;
            color: #00ffff;
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(0, 183, 255, 0.8);
            pointer-events: none;
            animation: solo-stat-float 2s ease-out forwards;
        }

        @keyframes solo-stat-float {
            0% {
                opacity: 0;
                transform: translateY(0);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }

        .magic-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }

        .magic-circle-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            border: 1px solid rgba(0, 183, 255, 0.3);
            box-shadow: 0 0 15px rgba(0, 183, 255, 0.2);
        }

        .magic-circle-ring:nth-child(1) {
            width: 200px;
            height: 200px;
            animation: rotate 20s linear infinite;
        }

        .magic-circle-ring:nth-child(2) {
            width: 300px;
            height: 300px;
            animation: rotate 30s linear infinite reverse;
        }

        .magic-circle-ring:nth-child(3) {
            width: 400px;
            height: 400px;
            animation: rotate 40s linear infinite;
        }

        .magic-circle-symbol {
            position: absolute;
            color: rgba(0, 183, 255, 0.6);
            font-size: 1.5rem;
            text-shadow: 0 0 5px rgba(0, 183, 255, 0.5);
        }

        /* Custom reward creation styles */
        .reward-icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 0.5rem;
        }

        .reward-icon-option {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(0, 183, 255, 0.1);
            border: 1px solid rgba(0, 183, 255, 0.2);
        }

        .reward-icon-option:hover {
            background: rgba(0, 183, 255, 0.2);
            transform: scale(1.05);
        }

        .reward-icon-option.selected {
            background: rgba(0, 183, 255, 0.3);
            border: 2px solid rgba(0, 183, 255, 0.6);
            box-shadow: 0 0 10px rgba(0, 183, 255, 0.4);
        }

        .reward-preview {
            background: rgba(0, 20, 40, 0.6);
            border: 1px solid rgba(0, 183, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        /* Theme customization */
        .theme-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .theme-option:hover {
            transform: scale(1.1);
        }

        .theme-option.selected {
            border: 2px solid white;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* Level up notification */
        .level-up-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 20, 40, 0.9);
            border: 2px solid rgba(0, 183, 255, 0.5);
            border-radius: 8px;
            padding: 1rem;
            z-index: 40;
            transform: translateX(120%);
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 0 20px rgba(0, 183, 255, 0.4);
        }

        .level-up-notification.active {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-black">
    <div id="app">
        <!-- Particles Background -->
        <div class="particles" id="particles"></div>

        <!-- Intro Screen -->
        <div id="intro-screen" class="min-h-screen bg-black flex items-center relative overflow-hidden">
            <div class="absolute inset-0 overflow-hidden">
                <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(0,183,255,0.15),transparent_100%)]"></div>
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00b7ff] to-transparent animate-float"></div>
                <div class="absolute left-0 top-0 h-full w-1 bg-gradient-to-b from-transparent via-[#00b7ff] to-transparent animate-float"></div>
                <div class="absolute bottom-0 right-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00b7ff] to-transparent animate-float" style="animation-delay: 1.5s;"></div>
                <div class="absolute right-0 top-0 h-full w-1 bg-gradient-to-b from-transparent via-[#00b7ff] to-transparent animate-float" style="animation-delay: 1.5s;"></div>
            </div>
            
            <div class="w-full flex flex-col md:flex-row justify-between items-center px-4 md:px-8 relative z-10">
                <div class="w-full md:w-1/2 text-center md:text-left pr-0 md:pr-8 mb-8 md:mb-0">
                    <div class="animate-float" style="animation-duration: 4s;">
                        <h1 class="text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight glow-text solo-text">
                            <span class="text-[#00b7ff]">Yare Yare...</span>
                        </h1>
                        <p class="text-3xl md:text-4xl font-light text-white/80 leading-tight">
                            Did you come to level up<br/>in your <span class="text-[#00b7ff] glow-text">life</span>?
                        </p>
                    </div>
                    
                    <div class="mt-8 flex justify-center md:justify-start space-x-4">
                        <div class="animate-pulse pulse-glow rounded-full w-3 h-3 bg-[#00b7ff]"></div>
                        <div class="animate-pulse pulse-glow rounded-full w-3 h-3 bg-[#00b7ff]" style="animation-delay: 0.5s;"></div>
                        <div class="animate-pulse pulse-glow rounded-full w-3 h-3 bg-[#00b7ff]" style="animation-delay: 1s;"></div>
                    </div>
                </div>

                <div class="w-full md:w-1/2 max-w-md">
                    <div class="bg-black/50 backdrop-blur-lg p-8 rounded-lg border border-[#00b7ff]/30 animate-border-glow cyberpunk-border">
                        <h2 class="text-2xl font-bold text-[#00b7ff] mb-6 text-center glow-text solo-text">BEGIN YOUR JOURNEY</h2>
                        <input
                            type="text"
                            id="player-name"
                            placeholder="ENTER YOUR NAME, SEEKER"
                            class="w-full px-4 py-3 bg-black/60 text-[#00b7ff] placeholder-[#00b7ff]/50 border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff] tracking-wider"
                        />
                        <div class="mt-4 text-center animate-pulse">
                            <p class="text-[#00b7ff]/70 text-sm tracking-wider">PRESS ENTER TO BEGIN YOUR JOURNEY</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Layout -->
        <div id="game-layout" class="min-h-screen bg-black flex hidden">
            <!-- Side Navigation -->
            <div class="w-20 bg-black/80 border-r border-[#00b7ff]/30 flex flex-col items-center py-8 space-y-8">
                <div class="w-16 h-16 rounded-full bg-[#00b7ff]/20 flex items-center justify-center mb-4 pulse-glow">
                    <span id="player-initial" class="text-2xl font-bold text-[#00b7ff]">P</span>
                </div>
                
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="profile">
                    <i data-lucide="user"></i>
                </div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="quests">
                    <i data-lucide="sword"></i>
                </div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="rewards">
                    <i data-lucide="gift"></i>
                </div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="create-quest">
                    <i data-lucide="plus-circle"></i>
                </div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="create-reward">
                    <i data-lucide="trophy"></i>
                </div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" data-page="settings">
                    <i data-lucide="settings"></i>
                </div>
                <div class="flex-grow"></div>
                <div class="nav-icon w-12 h-12 flex items-center justify-center rounded-lg cursor-pointer text-[#00b7ff]/70 hover:bg-[#00b7ff]/20 hover:text-[#00b7ff]" id="logout-btn">
                    <i data-lucide="log-out"></i>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="flex-1 p-4 md:p-8 overflow-y-auto">
                <!-- Header with level info -->
                <div class="mb-6 bg-black/40 p-4 rounded-lg border border-[#00b7ff]/30 flex flex-col md:flex-row justify-between items-center">
                    <div class="flex items-center mb-4 md:mb-0">
                        <div class="level-badge w-12 h-12 rounded-full flex items-center justify-center mr-4 magic-glow">
                            <span id="header-level" class="text-xl font-bold text-[#00b7ff]">1</span>
                        </div>
                        <div>
                            <h2 id="header-name" class="text-xl font-bold text-white solo-text">Player</h2>
                            <div class="flex items-center">
                                <span id="header-rank" class="text-[#00b7ff]/70 mr-2">Unranked</span>
                                <span id="header-xp" class="text-[#00b7ff]/70">0 XP</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="w-full md:w-1/3">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-[#00b7ff]/70 text-sm">Level Progress</span>
                            <span id="xp-progress" class="text-[#00b7ff]/70 text-sm">0/100</span>
                        </div>
                        <div class="progress-bar">
                            <div id="xp-bar" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Profile Page -->
                <div id="profile-page" class="page-content hidden">
                    <!-- Profile content will be dynamically populated -->
                </div>

                <!-- Quests Page -->
                <div id="quests-page" class="page-content hidden">
                    <!-- Quests content will be dynamically populated -->
                </div>

                <!-- Rewards Page -->
                <div id="rewards-page" class="page-content hidden">
                    <!-- Rewards content will be dynamically populated -->
                </div>

                <!-- Create Quest Page -->
                <div id="create-quest-page" class="page-content hidden">
                    <!-- Create Quest content will be dynamically populated -->
                </div>

                <!-- Create Reward Page -->
                <div id="create-reward-page" class="page-content hidden">
                    <!-- Create Reward content will be dynamically populated -->
                </div>

                <!-- Settings Page -->
                <div id="settings-page" class="page-content hidden">
                    <!-- Settings content will be dynamically populated -->
                </div>
            </div>
        </div>

        <!-- Quest Complete Overlay -->
        <div id="quest-complete-overlay" class="quest-complete-overlay">
            <div class="quest-complete-content">
                <div class="animate-rotate absolute -z-10 inset-0 opacity-20">
                    <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(0,183,255,0.3),transparent_70%)]"></div>
                </div>
                <h2 class="text-3xl font-bold text-[#00b7ff] glow-text solo-text">Quest Complete!</h2>
                <div class="my-4">
                    <i data-lucide="check-circle" class="w-16 h-16 text-[#00b7ff] mx-auto"></i>
                </div>
                <p id="quest-complete-title" class="text-xl text-white mb-2">Quest Title</p>
                <div class="xp-gain" id="quest-complete-xp">+100 XP</div>
                
                <div class="mt-4">
                    <p class="text-[#00b7ff]/70 mb-2">Stats Increased:</p>
                    <div id="quest-complete-stats" class="grid grid-cols-2 gap-2">
                        <!-- Stats will be populated dynamically -->
                    </div>
                </div>
                
                <button id="quest-complete-continue" class="mt-6 px-6 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary">
                    CONTINUE
                </button>
            </div>
        </div>

        <!-- Solo Leveling Style Level Up Animation -->
        <div id="solo-levelup-container" class="solo-levelup-container">
            <div class="magic-circle">
                <div class="magic-circle-ring"></div>
                <div class="magic-circle-ring"></div>
                <div class="magic-circle-ring"></div>
            </div>
            <div class="flex flex-col items-center justify-center text-center">
                <div class="solo-levelup-text solo-text">LEVEL UP!</div>
                <div class="solo-levelup-subtext" id="solo-levelup-level">Level 2</div>
            </div>
        </div>

        <!-- Level Up Notification -->
        <div id="level-up-notification" class="level-up-notification">
            <div class="flex items-center">
                <div class="mr-3">
                    <i data-lucide="arrow-up" class="w-8 h-8 text-[#00b7ff]"></i>
                </div>
                <div>
                    <h3 class="text-[#00b7ff] font-bold">Level Up!</h3>
                    <p class="text-white text-sm" id="level-up-notification-text">You've reached level 2!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Player state
        let player = null;
        const XP_PER_LEVEL = 100;
        const RANKS = [
            { name: "Novice", level: 1 },
            { name: "Apprentice", level: 5 },
            { name: "Adept", level: 10 },
            { name: "Expert", level: 15 },
            { name: "Master", level: 20 },
            { name: "Grandmaster", level: 25 },
            { name: "Legend", level: 30 }
        ];

        // Theme settings
        let currentTheme = {
            primary: '#00b7ff',
            secondary: '#00ffff',
            background: 'black'
        };

        // Active quest tracking
        let activeQuest = null;
        let questTimer = null;
        let questStartTime = null;

        // Initialize the application
        function init() {
            // Create particles
            createParticles();
            
            // Check for existing player
            const savedPlayer = localStorage.getItem('player');
            if (savedPlayer) {
                player = JSON.parse(savedPlayer);
                updateHeaderInfo();
                showGameLayout();
                navigateTo('profile');
            } else {
                showIntroScreen();
            }

            // Setup event listeners
            setupEventListeners();
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random size between 1 and 3px
                const size = Math.random() * 2 + 1;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // Random position
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                // Random opacity
                particle.style.opacity = Math.random() * 0.5 + 0.1;
                
                // Animation
                particle.style.animation = `float ${Math.random() * 10 + 10}s linear infinite`;
                
                particlesContainer.appendChild(particle);
            }
        }

        function setupEventListeners() {
            // Name input handler
            const nameInput = document.getElementById('player-name');
            if (nameInput) {
                nameInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && nameInput.value.trim()) {
                        createPlayer(nameInput.value.trim());
                    }
                });
            }

            // Navigation handlers
            document.querySelectorAll('.nav-icon').forEach(icon => {
                icon.addEventListener('click', () => {
                    const page = icon.dataset.page;
                    if (page) {
                        navigateTo(page);
                    }
                });
            });

            // Logout handler
            document.getElementById('logout-btn').addEventListener('click', () => {
                localStorage.removeItem('player');
                showIntroScreen();
            });

            // Quest complete continue button
            document.getElementById('quest-complete-continue').addEventListener('click', () => {
                document.getElementById('quest-complete-overlay').classList.remove('active');
            });
        }

        function createPlayer(name) {
            player = {
                name: name,
                level: 1,
                xp: 0,
                xpToNextLevel: XP_PER_LEVEL,
                rank: getRankForLevel(1),
                stats: {
                    strength: 1,
                    endurance: 1,
                    focus: 1,
                    discipline: 1,
                    agility: 1,
                    intelligence: 1
                },
                quests: [
                    {
                        id: '1',
                        title: 'Morning Exercise',
                        description: 'Complete a 10-minute workout to start your day energized',
                        xp: 50,
                        timeLimit: 10,
                        category: 'physical',
                        completed: false,
                        stats: ['strength', 'endurance']
                    },
                    {
                        id: '2',
                        title: 'Meditation Session',
                        description: 'Practice mindfulness meditation to improve focus',
                        xp: 30,
                        timeLimit: 5,
                        category: 'mental',
                        completed: false,
                        stats: ['focus', 'discipline']
                    }
                ],
                rewards: [
                    {
                        id: '1',
                        title: 'Cheat Day',
                        description: 'Enjoy your favorite fast food without guilt',
                        cost: 100,
                        icon: 'pizza',
                        custom: false
                    },
                    {
                        id: '2',
                        title: 'Gaming Session',
                        description: '2 hours of guilt-free gaming',
                        cost: 50,
                        icon: 'gamepad-2',
                        custom: false
                    }
                ],
                completedQuests: [],
                claimedRewards: [],
                settings: {
                    theme: 'blue',
                    animations: true,
                    notifications: true
                }
            };
            
            localStorage.setItem('player', JSON.stringify(player));
            updateHeaderInfo();
            showGameLayout();
            navigateTo('profile');
        }

        function getRankForLevel(level) {
            for (let i = RANKS.length - 1; i >= 0; i--) {
                if (level >= RANKS[i].level) {
                    return RANKS[i].name;
                }
            }
            return "Unranked";
        }

        function updateHeaderInfo() {
            if (!player) return;
            
            document.getElementById('header-name').textContent = player.name;
            document.getElementById('header-level').textContent = player.level;
            document.getElementById('header-rank').textContent = player.rank;
            document.getElementById('header-xp').textContent = `${player.xp} XP`;
            
            // Update XP progress bar
            const xpProgress = document.getElementById('xp-progress');
            const xpBar = document.getElementById('xp-bar');
            
            const xpForCurrentLevel = player.level * XP_PER_LEVEL;
            const xpForNextLevel = (player.level + 1) * XP_PER_LEVEL;
            const currentLevelProgress = player.xp - xpForCurrentLevel;
            const xpNeededForNextLevel = xpForNextLevel - xpForCurrentLevel;
            
            xpProgress.textContent = `${currentLevelProgress}/${xpNeededForNextLevel}`;
            xpBar.style.width = `${(currentLevelProgress / xpNeededForNextLevel) * 100}%`;
            
            // Update player initial
            document.getElementById('player-initial').textContent = player.name.charAt(0).toUpperCase();
        }

        function showIntroScreen() {
            document.getElementById('intro-screen').classList.remove('hidden');
            document.getElementById('game-layout').classList.add('hidden');
        }

        function showGameLayout() {
            document.getElementById('intro-screen').classList.add('hidden');
            document.getElementById('game-layout').classList.remove('hidden');
        }

        function navigateTo(page) {
            // If there's an active quest, confirm before navigating away
            if (activeQuest && page !== 'quests') {
                if (!confirm('You have an active quest in progress. Navigating away will cancel it. Continue?')) {
                    return;
                } else {
                    cancelActiveQuest();
                }
            }
            
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
            
            // Show selected page
            const pageElement = document.getElementById(`${page}-page`);
            if (pageElement) {
                pageElement.classList.remove('hidden');
                renderPage(page);
            }

            // Update active nav state
            document.querySelectorAll('.nav-icon').forEach(icon => {
                if (icon.dataset.page === page) {
                    icon.classList.add('bg-[#00b7ff]/20', 'text-[#00b7ff]');
                } else {
                    icon.classList.remove('bg-[#00b7ff]/20', 'text-[#00b7ff]');
                }
            });
        }

        function renderPage(page) {
            switch(page) {
                case 'profile':
                    renderProfile();
                    break;
                case 'quests':
                    renderQuests();
                    break;
                case 'rewards':
                    renderRewards();
                    break;
                case 'create-quest':
                    renderCreateQuest();
                    break;
                case 'create-reward':
                    renderCreateReward();
                    break;
                case 'settings':
                    renderSettings();
                    break;
            }
        }

        function renderProfile() {
            const profileContent = `
                <div class="space-y-6">
                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <div class="flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6 mb-6">
                            <div class="w-24 h-24 rounded-full bg-[#00b7ff]/20 flex items-center justify-center pulse-glow">
                                <span class="text-4xl font-bold text-[#00b7ff] solo-text">${player.name.charAt(0).toUpperCase()}</span>
                            </div>
                            <div class="text-center md:text-left">
                                <h2 class="text-3xl font-bold text-[#00b7ff] glow-text solo-text">${player.name}</h2>
                                <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                                    <div class="flex items-center justify-center md:justify-start space-x-2">
                                        <div class="level-badge px-3 py-1 rounded-full">
                                            <span class="text-[#00b7ff]">Level ${player.level}</span>
                                        </div>
                                        <div class="text-[#00b7ff]/70">${player.rank}</div>
                                    </div>
                                    <div class="mt-2 md:mt-0">
                                        <div class="flex items-center justify-center md:justify-start space-x-2">
                                            <i data-lucide="star" class="w-4 h-4 text-[#00b7ff]"></i>
                                            <span class="text-[#00b7ff]/70">${player.xp} XP</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-xl font-bold text-[#00b7ff] mb-3 solo-text">Character Stats</h3>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                ${renderStatCard('Strength', player.stats.strength, 'sword')}
                                ${renderStatCard('Endurance', player.stats.endurance, 'shield')}
                                ${renderStatCard('Focus', player.stats.focus, 'brain')}
                                ${renderStatCard('Discipline', player.stats.discipline, 'heart')}
                                ${renderStatCard('Agility', player.stats.agility, 'dumbbell')}
                                ${renderStatCard('Intelligence', player.stats.intelligence, 'lightbulb')}
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold text-[#00b7ff] mb-3 solo-text">Achievement Progress</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${renderAchievement('Early Riser', 'Complete 5 morning quests', 0, 5)}
                                ${renderAchievement('Mind Master', 'Reach level 5 in Focus', player.stats.focus, 5)}
                                ${renderAchievement('Iron Will', 'Complete 10 quests', player.completedQuests ? player.completedQuests.length : 0, 10)}
                            </div>
                        </div>
                    </div>

                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h3 class="text-xl font-bold text-[#00b7ff] mb-3 solo-text">Recent Activity</h3>
                        <div class="space-y-3">
                            ${player.completedQuests && player.completedQuests.length > 0 ? player.completedQuests.slice(0, 3).map(quest => `
                                <div class="bg-black/60 p-3 rounded border border-[#00b7ff]/30 flex justify-between items-center quest-card">
                                    <div>
                                        <h4 class="text-[#00b7ff]">${quest.title}</h4>
                                        <p class="text-[#00b7ff]/60 text-sm">${new Date(quest.completedAt).toLocaleString()}</p>
                                    </div>
                                    <div class="text-[#00b7ff]">+${quest.xp} XP</div>
                                </div>
                            `).join('') : `<p class="text-[#00b7ff]/60">No completed quests yet. Start your journey!</p>`}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('profile-page').innerHTML = profileContent;
            lucide.createIcons();
        }

        function renderAchievement(title, description, current, target) {
            const percentage = Math.min(100, (current / target) * 100);
            return `
                <div class="bg-black/60 p-4 rounded border border-[#00b7ff]/30 quest-card">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="text-[#00b7ff]">${title}</h4>
                        <span class="text-[#00b7ff]/70">${current}/${target}</span>
                    </div>
                    <p class="text-[#00b7ff]/60 text-sm mb-2">${description}</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%"></div>
                    </div>
                </div>
            `;
        }

        function renderStatCard(label, value, icon) {
            return `
                <div class="bg-black/60 p-4 rounded border border-[#00b7ff]/30 quest-card">
                    <div class="flex items-center space-x-2 text-[#00b7ff]/80">
                        <i data-lucide="${icon}" class="w-5 h-5"></i>
                        <span>${label}</span>
                    </div>
                    <p class="text-2xl font-bold text-[#00b7ff] mt-2">${value}</p>
                </div>
            `;
        }

        function renderQuests() {
            // Group quests by category
            const categories = {
                physical: { icon: 'dumbbell', name: 'Physical' },
                mental: { icon: 'brain', name: 'Mental' },
                health: { icon: 'heart', name: 'Health' },
                other: { icon: 'list', name: 'Other' }
            };

            let questsByCategory = {};
            
            player.quests.forEach(quest => {
                const category = quest.category || 'other';
                if (!questsByCategory[category]) {
                    questsByCategory[category] = [];
                }
                questsByCategory[category].push(quest);
            });

            let questsContent = `
                <div class="space-y-6">
                    ${activeQuest ? renderActiveQuest() : ''}
                    
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold text-[#00b7ff] glow-text solo-text">Available Quests</h2>
                        <button 
                            onclick="navigateTo('create-quest')" 
                            class="px-4 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider flex items-center space-x-2 btn-primary"
                        >
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>NEW QUEST</span>
                        </button>
                    </div>
            `;

            // Render quests by category
            for (const [category, quests] of Object.entries(questsByCategory)) {
                if (quests.length === 0) continue;
                
                const categoryInfo = categories[category] || categories.other;
                
                questsContent += `
                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <div class="flex items-center space-x-2 mb-4">
                            <i data-lucide="${categoryInfo.icon}" class="text-[#00b7ff] w-5 h-5"></i>
                            <h3 class="text-xl font-bold text-[#00b7ff] solo-text">${categoryInfo.name} Quests</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${quests.filter(q => !q.completed).map(quest => `
                                <div class="bg-black/60 p-4 rounded border border-[#00b7ff]/30 quest-card" id="quest-${quest.id}">
                                    <div class="flex justify-between items-center">
                                        <h3 class="text-lg font-semibold text-[#00b7ff]">${quest.title}</h3>
                                        <div class="flex items-center space-x-2">
                                            <i data-lucide="star" class="w-4 h-4 text-[#00b7ff]/70"></i>
                                            <span class="text-[#00b7ff]/70">${quest.xp} XP</span>
                                        </div>
                                    </div>
                                    <p class="text-[#00b7ff]/60 mt-2">${quest.description}</p>
                                    <div class="flex flex-wrap items-center mt-2 space-x-3">
                                        <div class="flex items-center">
                                            <i data-lucide="timer" class="text-[#00b7ff]/70 w-4 h-4 mr-1"></i>
                                            <span class="text-[#00b7ff]/60">${quest.timeLimit} min</span>
                                        </div>
                                        ${quest.stats ? `
                                            <div class="flex items-center space-x-1">
                                                ${quest.stats.map(stat => `
                                                    <span class="px-2 py-0.5 bg-[#00b7ff]/10 text-[#00b7ff]/70 rounded text-xs">${stat}</span>
                                                `).join('')}
                                            </div>
                                        ` : ''}
                                    </div>
                                    <button
                                        onclick="startQuest('${quest.id}')"
                                        class="mt-4 w-full py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary"
                                    >
                                        START QUEST
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            questsContent += `</div>`;

            document.getElementById('quests-page').innerHTML = questsContent;
            lucide.createIcons();
        }

        function renderActiveQuest() {
            return `
                <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] mb-6 animate-border-glow cyberpunk-border">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-[#00b7ff] glow-text solo-text">Active Quest</h3>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="star" class="w-4 h-4 text-[#00b7ff]/70"></i>
                            <span class="text-[#00b7ff]/70">${activeQuest.xp} XP</span>
                        </div>
                    </div>
                    
                    <h4 class="text-lg font-semibold text-[#00b7ff] mb-2">${activeQuest.title}</h4>
                    <p class="text-[#00b7ff]/60 mb-4">${activeQuest.description}</p>
                    
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[#00b7ff]/70 text-sm">Time Remaining</span>
                            <span id="quest-timer" class="text-[#00b7ff]/70 text-sm">${activeQuest.timeLimit}:00</span>
                        </div>
                        <div class="progress-bar">
                            <div id="quest-timer-bar" class="progress-fill quest-timer" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button
                            onclick="completeQuest()"
                            class="flex-1 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary"
                        >
                            COMPLETE QUEST
                        </button>
                        <button
                            onclick="cancelActiveQuest()"
                            class="py-2 px-4 bg-black/60 hover:bg-black/80 text-[#00b7ff]/70 hover:text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors"
                        >
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        function startQuest(questId) {
            // Find the quest
            const quest = player.quests.find(q => q.id === questId);
            if (!quest) return;
            
            // Set as active quest
            activeQuest = quest;
            questStartTime = Date.now();
            
            // Start the timer
            startQuestTimer(quest.timeLimit);
            
            // Re-render quests page
            renderQuests();

            // Create magic particles effect
            createMagicParticles(document.getElementById(`quest-${questId}`));
        }

        function startQuestTimer(minutes) {
            // Clear any existing timer
            if (questTimer) {
                clearInterval(questTimer);
            }
            
            const totalSeconds = minutes * 60;
            let secondsRemaining = totalSeconds;
            const timerBar = document.getElementById('quest-timer-bar');
            
            // Update timer immediately
            updateQuestTimer(secondsRemaining, totalSeconds);
            
            // Set up interval
            questTimer = setInterval(() => {
                secondsRemaining--;
                updateQuestTimer(secondsRemaining, totalSeconds);
                
                if (secondsRemaining <= 0) {
                    clearInterval(questTimer);
                    // Auto-complete quest when timer ends
                    completeQuest();
                }
            }, 1000);
        }

        function updateQuestTimer(secondsRemaining, totalSeconds) {
            const timerElement = document.getElementById('quest-timer');
            const timerBar = document.getElementById('quest-timer-bar');
            
            if (!timerElement || !timerBar) return;
            
            // Format time as MM:SS
            const minutes = Math.floor(secondsRemaining / 60);
            const seconds = secondsRemaining % 60;
            timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const percentRemaining = (secondsRemaining / totalSeconds) * 100;
            timerBar.style.width = `${percentRemaining}%`;
            
            // Change color as time runs out
            if (percentRemaining < 25) {
                timerBar.style.background = 'linear-gradient(90deg, rgba(255, 50, 50, 0.5), rgba(255, 50, 50, 0.8))';
            } else if (percentRemaining < 50) {
                timerBar.style.background = 'linear-gradient(90deg, rgba(255, 183, 0, 0.5), rgba(255, 183, 0, 0.8))';
            }
        }

        function cancelActiveQuest() {
            if (questTimer) {
                clearInterval(questTimer);
                questTimer = null;
            }
            
            activeQuest = null;
            questStartTime = null;
            
            // Re-render quests page
            renderQuests();
        }

        function completeQuest() {
            if (!activeQuest) return;
            
            // Clear timer
            if (questTimer) {
                clearInterval(questTimer);
                questTimer = null;
            }
            
            // Calculate time spent
            const timeSpent = Math.floor((Date.now() - questStartTime) / 1000 / 60);
            
            // Mark quest as completed
            const questIndex = player.quests.findIndex(q => q.id === activeQuest.id);
            if (questIndex !== -1) {
                player.quests[questIndex].completed = true;
            }
            
            // Add to completed quests
            if (!player.completedQuests) {
                player.completedQuests = [];
            }
            
            player.completedQuests.unshift({
                ...activeQuest,
                completedAt: Date.now(),
                timeSpent
            });
            
            // Increase stats
            const statIncreases = {};
            if (activeQuest.stats && activeQuest.stats.length > 0) {
                activeQuest.stats.forEach(stat => {
                    if (player.stats[stat] !== undefined) {
                        player.stats[stat] += 1;
                        statIncreases[stat] = player.stats[stat];
                    }
                });
            }
            
            // Add XP
            const oldLevel = player.level;
            addXP(activeQuest.xp);
            
            // Check if player leveled up
            if (player.level > oldLevel) {
                showSoloLevelUpAnimation(player.level);
            }
            
            // Save player data
            localStorage.setItem('player', JSON.stringify(player));
            
            // Show completion overlay
            showQuestCompleteOverlay(activeQuest, statIncreases);
            
            // Reset active quest
            activeQuest = null;
            questStartTime = null;
            
            // Re-render quests page
            renderQuests();
        }

        function showQuestCompleteOverlay(quest, statIncreases) {
            const overlay = document.getElementById('quest-complete-overlay');
            const titleElement = document.getElementById('quest-complete-title');
            const xpElement = document.getElementById('quest-complete-xp');
            const statsElement = document.getElementById('quest-complete-stats');
            
            titleElement.textContent = quest.title;
            xpElement.textContent = `+${quest.xp} XP`;
            
            // Populate stats increases
            let statsHTML = '';
            for (const [stat, value] of Object.entries(statIncreases)) {
                statsHTML += `
                    <div class="flex items-center justify-between bg-[#00b7ff]/10 p-2 rounded">
                        <span class="text-[#00b7ff]/80 capitalize">${stat}</span>
                        <span class="text-[#00b7ff] font-bold">+1 (${value})</span>
                    </div>
                `;
            }
            statsElement.innerHTML = statsHTML || '<p class="text-[#00b7ff]/60">No stats increased</p>';
            
            // Show overlay with animation
            overlay.classList.add('active');
            
            // Create particles effect
            createCompletionParticles();
            
            // Update icons
            lucide.createIcons();
        }

        function createCompletionParticles() {
            const overlay = document.getElementById('quest-complete-overlay');
            const content = overlay.querySelector('.quest-complete-content');
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.style.position = 'absolute';
                    particle.style.width = '8px';
                    particle.style.height = '8px';
                    particle.style.backgroundColor = 'rgba(0, 183, 255, 0.6)';
                    particle.style.borderRadius = '50%';
                    
                    // Position at center of content
                    const rect = content.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    
                    // Random direction
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 100 + Math.random() * 150;
                    const speedFactor = 0.5 + Math.random() * 0.5;
                    
                    // Animate
                    particle.animate([
                        { 
                            transform: 'translate(-50%, -50%) scale(0)',
                            opacity: 0
                        },
                        { 
                            transform: 'translate(-50%, -50%) scale(1)',
                            opacity: 1,
                            offset: 0.1
                        },
                        { 
                            transform: `translate(calc(-50% + ${Math.cos(angle) * distance}px), calc(-50% + ${Math.sin(angle) * distance}px)) scale(0)`,
                            opacity: 0
                        }
                    ], {
                        duration: 1500 * speedFactor,
                        easing: 'cubic-bezier(0.1, 0.8, 0.2, 1)'
                    });
                    
                    overlay.appendChild(particle);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        particle.remove();
                    }, 1500);
                }, Math.random() * 500);
            }
        }

        function showSoloLevelUpAnimation(newLevel) {
            const container = document.getElementById('solo-levelup-container');
            const levelText = document.getElementById('solo-levelup-level');
            
            // Set level text
            levelText.textContent = `Level ${newLevel}`;
            
            // Create rings
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const ring = document.createElement('div');
                    ring.classList.add('solo-levelup-ring');
                    ring.style.animationDuration = `${2 + i * 0.5}s`;
                    
                    container.appendChild(ring);
                    
                    // Remove ring after animation
                    setTimeout(() => {
                        ring.remove();
                    }, (2 + i * 0.5) * 1000);
                }, i * 300);
            }
            
            // Show container
            container.classList.add('active');
            
            // Create magic particles
            createMagicParticles(container, 50);
            
            // Hide after animation
            setTimeout(() => {
                container.classList.remove('active');
            }, 4000);
        }

        function createMagicParticles(element, count = 20) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.classList.add('magic-particle');
                    
                    // Random size
                    const size = 3 + Math.random() * 5;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    // Position at center of element
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    
                    // Random direction and distance
                    const tx = (Math.random() - 0.5) * rect.width * 2;
                    const ty = (Math.random() - 0.5) * rect.height * 2;
                    const rotation = Math.random() * 360;
                    const duration = 1 + Math.random() * 2;
                    
                    particle.style.setProperty('--tx', `${tx}px`);
                    particle.style.setProperty('--ty', `${ty}px`);
                    particle.style.setProperty('--r', `${rotation}deg`);
                    particle.style.setProperty('--duration', `${duration}s`);
                    
                    document.body.appendChild(particle);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        particle.remove();
                    }, duration * 1000);
                }, Math.random() * 500);
            }
        }

        function addXP(amount) {
            const oldLevel = player.level;
            player.xp += amount;
            
            // Check for level up
            const newLevel = Math.floor(player.xp / XP_PER_LEVEL) + 1;
            if (newLevel > player.level) {
                // Level up!
                player.level = newLevel;
                player.rank = getRankForLevel(newLevel);
                
                // Show level up notification
                if (player.settings && player.settings.notifications) {
                    showLevelUpNotification(newLevel);
                }
            }
            
            // Update header info
            updateHeaderInfo();
        }

        function showLevelUpNotification(level) {
            const notification = document.getElementById('level-up-notification');
            const text = document.getElementById('level-up-notification-text');
            
            text.textContent = `You've reached level ${level}!`;
            notification.classList.add('active');
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 5000);
        }

        function renderRewards() {
            const rewardsContent = `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold text-[#00b7ff] glow-text solo-text">Rewards</h2>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2 bg-[#00b7ff]/10 px-3 py-1 rounded-full">
                                <i data-lucide="star" class="text-[#00b7ff] w-5 h-5"></i>
                                <span class="text-[#00b7ff] font-bold">${player.xp} XP</span>
                            </div>
                            <button 
                                onclick="navigateTo('create-reward')" 
                                class="px-4 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider flex items-center space-x-2 btn-primary"
                            >
                                <i data-lucide="plus" class="w-4 h-4"></i>
                                <span>NEW REWARD</span>
                            </button>
                        </div>
                    </div>

                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h3 class="text-xl font-bold text-[#00b7ff] mb-4 solo-text">Available Rewards</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${player.rewards.map(reward => `
                                <div class="bg-black/60 p-4 rounded border border-[#00b7ff]/30 quest-card">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-10 h-10 rounded-full bg-[#00b7ff]/10 flex items-center justify-center">
                                                <i data-lucide="${reward.icon}" class="w-5 h-5 text-[#00b7ff]"></i>
                                            </div>
                                            <h3 class="text-lg font-semibold text-[#00b7ff]">${reward.title}</h3>
                                        </div>
                                        <span class="text-[#00b7ff]/70">${reward.cost} XP</span>
                                    </div>
                                    <p class="text-[#00b7ff]/60 mt-2">${reward.description}</p>
                                    <div class="flex space-x-2 mt-4">
                                        <button 
                                            onclick="claimReward('${reward.id}')"
                                            class="flex-1 py-2 rounded border transition-colors tracking-wider ${
                                                player.xp >= reward.cost
                                                    ? 'bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] border-[#00b7ff]/30 btn-primary'
                                                    : 'bg-gray-800/50 text-gray-500 border-gray-700 cursor-not-allowed'
                                            }"
                                            ${player.xp < reward.cost ? 'disabled' : ''}
                                        >
                                            ${player.xp >= reward.cost ? 'CLAIM REWARD' : 'INSUFFICIENT XP'}
                                        </button>
                                        ${reward.custom ? `
                                            <button 
                                                onclick="deleteReward('${reward.id}')"
                                                class="py-2 px-3 bg-black/60 hover:bg-red-900/30 text-[#00b7ff]/70 hover:text-red-400 rounded border border-[#00b7ff]/30 transition-colors"
                                            >
                                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h3 class="text-xl font-bold text-[#00b7ff] mb-4 solo-text">Claimed Rewards</h3>
                        ${player.claimedRewards && player.claimedRewards.length > 0 ? `
                            <div class="space-y-3">
                                ${player.claimedRewards.map(reward => `
                                    <div class="bg-black/60 p-3 rounded border border-[#00b7ff]/30 flex justify-between items-center quest-card">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 rounded-full bg-[#00b7ff]/10 flex items-center justify-center">
                                                <i data-lucide="${reward.icon}" class="w-4 h-4 text-[#00b7ff]"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-[#00b7ff]">${reward.title}</h4>
                                                <p class="text-[#00b7ff]/60 text-sm">${new Date(reward.claimedAt).toLocaleString()}</p>
                                            </div>
                                        </div>
                                        <div class="text-[#00b7ff]/70">-${reward.cost} XP</div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : `
                            <p class="text-[#00b7ff]/60">No rewards claimed yet. Use your XP to claim rewards!</p>
                        `}
                    </div>
                </div>
            `;

            document.getElementById('rewards-page').innerHTML = rewardsContent;
            lucide.createIcons();
        }

        function claimReward(rewardId) {
            const reward = player.rewards.find(r => r.id === rewardId);
            if (!reward) return;
            
            // Check if player has enough XP
            if (player.xp < reward.cost) {
                alert('Not enough XP to claim this reward!');
                return;
            }
            
            // Deduct XP
            player.xp -= reward.cost;
            
            // Add to claimed rewards
            if (!player.claimedRewards) {
                player.claimedRewards = [];
            }
            
            player.claimedRewards.unshift({
                ...reward,
                claimedAt: Date.now()
            });
            
            // Save player data
            localStorage.setItem('player', JSON.stringify(player));
            
            // Update header info
            updateHeaderInfo();
            
            // Re-render rewards page
            renderRewards();
            
            // Show success message with Solo Leveling style
            showRewardClaimedAnimation(reward);
        }

        function showRewardClaimedAnimation(reward) {
            // Create a temporary overlay
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            overlay.style.display = 'flex';
            overlay.style.alignItems = 'center';
            overlay.style.justifyContent = 'center';
            overlay.style.zIndex = '100';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.3s ease';
            
            // Create content
            const content = document.createElement('div');
            content.style.textAlign = 'center';
            content.style.color = '#00b7ff';
            content.style.padding = '2rem';
            content.style.borderRadius = '10px';
            content.style.backgroundColor = 'rgba(0, 20, 40, 0.9)';
            content.style.border = '2px solid rgba(0, 183, 255, 0.5)';
            content.style.boxShadow = '0 0 30px rgba(0, 183, 255, 0.4)';
            content.style.transform = 'scale(0.8)';
            content.style.transition = 'transform 0.5s ease';
            
            content.innerHTML = `
                <div class="solo-text text-3xl font-bold mb-4">Reward Claimed!</div>
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-[#00b7ff]/20 flex items-center justify-center pulse-glow">
                    <i data-lucide="${reward.icon}" class="w-8 h-8 text-[#00b7ff]"></i>
                </div>
                <div class="text-2xl font-bold mb-2">${reward.title}</div>
                <div class="text-[#00b7ff]/70 mb-6">${reward.description}</div>
                <button class="px-6 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary">
                    CONTINUE
                </button>
            `;
            
            overlay.appendChild(content);
            document.body.appendChild(overlay);
            
            // Create magic particles
            createMagicParticles(content, 30);
            
            // Show overlay
            setTimeout(() => {
                overlay.style.opacity = '1';
                content.style.transform = 'scale(1)';
            }, 100);
            
            // Update icons
            lucide.createIcons();
            
            // Add event listener to close button
            const button = content.querySelector('button');
            button.addEventListener('click', () => {
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.remove();
                }, 300);
            });
            
            // Auto close after 5 seconds
            setTimeout(() => {
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.remove();
                }, 300);
            }, 5000);
        }

        function deleteReward(rewardId) {
            if (confirm('Are you sure you want to delete this reward?')) {
                player.rewards = player.rewards.filter(r => r.id !== rewardId);
                localStorage.setItem('player', JSON.stringify(player));
                renderRewards();
            }
        }

        function renderCreateQuest() {
            const createQuestContent = `
                <div class="space-y-6">
                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h2 class="text-2xl font-bold text-[#00b7ff] mb-6 glow-text solo-text">Create New Quest</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Quest Title</label>
                                <input
                                    type="text"
                                    id="quest-title"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                    placeholder="Enter quest title"
                                />
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Description</label>
                                <textarea
                                    id="quest-description"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff] h-24"
                                    placeholder="Enter quest description"
                                ></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="text-[#00b7ff]/80 block mb-2">XP Reward</label>
                                    <input
                                        type="number"
                                        id="quest-xp"
                                        value="100"
                                        class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                        min="0"
                                    />
                                </div>

                                <div>
                                    <label class="text-[#00b7ff]/80 block mb-2">Time Limit (minutes)</label>
                                    <input
                                        type="number"
                                        id="quest-time"
                                        value="30"
                                        class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                        min="0"
                                    />
                                </div>
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Category</label>
                                <select
                                    id="quest-category"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                >
                                    <option value="physical">Physical</option>
                                    <option value="mental">Mental</option>
                                    <option value="health">Health</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Stats to Improve</label>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="strength" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Strength</span>
                                    </label>
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="endurance" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Endurance</span>
                                    </label>
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="focus" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Focus</span>
                                    </label>
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="discipline" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Discipline</span>
                                    </label>
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="agility" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Agility</span>
                                    </label>
                                    <label class="flex items-center space-x-2 bg-black/40 p-2 rounded cursor-pointer hover:bg-black/60">
                                        <input type="checkbox" name="stats" value="intelligence" class="accent-[#00b7ff]">
                                        <span class="text-[#00b7ff]/80">Intelligence</span>
                                    </label>
                                </div>
                            </div>

                            <button
                                onclick="createNewQuest()"
                                class="mt-4 w-full py-3 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary"
                            >
                                CREATE QUEST
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('create-quest-page').innerHTML = createQuestContent;
            lucide.createIcons();
        }

        function renderCreateReward() {
            const icons = [
                'pizza', 'gamepad-2', 'film', 'moon', 'coffee', 'music', 'shopping-bag', 'tv', 
                'book', 'car', 'gift', 'ice-cream', 'beer', 'cake', 'smartphone', 'headphones'
            ];
            
            const createRewardContent = `
                <div class="space-y-6">
                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h2 class="text-2xl font-bold text-[#00b7ff] mb-6 glow-text solo-text">Create Custom Reward</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Reward Title</label>
                                <input
                                    type="text"
                                    id="reward-title"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                    placeholder="Enter reward title"
                                />
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Description</label>
                                <textarea
                                    id="reward-description"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff] h-24"
                                    placeholder="Enter reward description"
                                ></textarea>
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">XP Cost</label>
                                <input
                                    type="number"
                                    id="reward-cost"
                                    value="100"
                                    class="w-full px-3 py-2 bg-black/60 text-[#00b7ff] border border-[#00b7ff]/30 rounded focus:outline-none focus:border-[#00b7ff] focus:ring-1 focus:ring-[#00b7ff]"
                                    min="0"
                                />
                            </div>

                            <div>
                                <label class="text-[#00b7ff]/80 block mb-2">Select Icon</label>
                                <div class="reward-icon-grid">
                                    ${icons.map(icon => `
                                        <div class="reward-icon-option" data-icon="${icon}" onclick="selectRewardIcon(this)">
                                            <i data-lucide="${icon}" class="w-6 h-6 text-[#00b7ff]"></i>
                                        </div>
                                    `).join('')}
                                </div>
                                <input type="hidden" id="reward-icon" value="gift">
                            </div>

                            <div class="reward-preview">
                                <h3 class="text-[#00b7ff] mb-2">Preview</h3>
                                <div class="bg-black/60 p-4 rounded border border-[#00b7ff]/30">
                                    <div class="flex justify-between items-center">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-10 h-10 rounded-full bg-[#00b7ff]/10 flex items-center justify-center">
                                                <i id="preview-icon" data-lucide="gift" class="w-5 h-5 text-[#00b7ff]"></i>
                                            </div>
                                            <h3 id="preview-title" class="text-lg font-semibold text-[#00b7ff]">Reward Title</h3>
                                        </div>
                                        <span id="preview-cost" class="text-[#00b7ff]/70">100 XP</span>
                                    </div>
                                    <p id="preview-description" class="text-[#00b7ff]/60 mt-2">Reward description</p>
                                </div>
                            </div>

                            <button
                                onclick="createNewReward()"
                                class="mt-4 w-full py-3 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary"
                            >
                                CREATE REWARD
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('create-reward-page').innerHTML = createRewardContent;
            lucide.createIcons();

            // Set up preview update listeners
            document.getElementById('reward-title').addEventListener('input', updateRewardPreview);
            document.getElementById('reward-description').addEventListener('input', updateRewardPreview);
            document.getElementById('reward-cost').addEventListener('input', updateRewardPreview);
        }

        function renderSettings() {
            const settingsContent = `
                <div class="space-y-6">
                    <div class="bg-black/80 backdrop-blur-lg p-6 rounded-lg border border-[#00b7ff]/30 shadow-[0_0_15px_rgba(0,183,255,0.3)] cyberpunk-border">
                        <h2 class="text-2xl font-bold text-[#00b7ff] mb-6 glow-text solo-text">Settings</h2>
                        
                        <div class="space-y-6">
                            <div>
                                <h3 class="text-xl font-bold text-[#00b7ff] mb-3">Theme</h3>
                                <div class="flex space-x-4">
                                    <div class="theme-option ${player.settings?.theme === 'blue' ? 'selected' : ''}" 
                                        style="background: linear-gradient(135deg, #00b7ff, #0077ff);"
                                        onclick="changeTheme('blue')">
                                    </div>
                                    <div class="theme-option ${player.settings?.theme === 'purple' ? 'selected' : ''}" 
                                        style="background: linear-gradient(135deg, #a855f7, #6366f1);"
                                        onclick="changeTheme('purple')">
                                    </div>
                                    <div class="theme-option ${player.settings?.theme === 'green' ? 'selected' : ''}" 
                                        style="background: linear-gradient(135deg, #10b981, #059669);"
                                        onclick="changeTheme('green')">
                                    </div>
                                    <div class="theme-option ${player.settings?.theme === 'red' ? 'selected' : ''}" 
                                        style="background: linear-gradient(135deg, #ef4444, #b91c1c);"
                                        onclick="changeTheme('red')">
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-bold text-[#00b7ff] mb-3">Animations</h3>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" id="animations-toggle" class="accent-[#00b7ff] w-5 h-5"
                                        ${player.settings?.animations !== false ? 'checked' : ''}>
                                    <span class="text-[#00b7ff]/80">Enable animations</span>
                                </label>
                                <p class="text-[#00b7ff]/60 text-sm mt-1">Disable this if you experience performance issues</p>
                            </div>

                            <div>
                                <h3 class="text-xl font-bold text-[#00b7ff] mb-3">Notifications</h3>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" id="notifications-toggle" class="accent-[#00b7ff] w-5 h-5"
                                        ${player.settings?.notifications !== false ? 'checked' : ''}>
                                    <span class="text-[#00b7ff]/80">Enable notifications</span>
                                </label>
                                <p class="text-[#00b7ff]/60 text-sm mt-1">Show level up and achievement notifications</p>
                            </div>

                            <div>
                                <h3 class="text-xl font-bold text-[#00b7ff] mb-3">Data Management</h3>
                                <div class="flex space-x-3">
                                    <button onclick="exportPlayerData()" class="px-4 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary">
                                        Export Data
                                    </button>
                                    <button onclick="importPlayerData()" class="px-4 py-2 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary">
                                        Import Data
                                    </button>
                                    <button onclick="resetPlayerData()" class="px-4 py-2 bg-black/60 hover:bg-red-900/30 text-[#00b7ff]/70 hover:text-red-400 rounded border border-[#00b7ff]/30 transition-colors">
                                        Reset All Data
                                    </button>
                                </div>
                            </div>

                            <button
                                onclick="saveSettings()"
                                class="mt-4 w-full py-3 bg-[#00b7ff]/20 hover:bg-[#00b7ff]/30 text-[#00b7ff] rounded border border-[#00b7ff]/30 transition-colors tracking-wider btn-primary"
                            >
                                SAVE SETTINGS
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('settings-page').innerHTML = settingsContent;
            lucide.createIcons();
        }

        function createNewQuest() {
            const title = document.getElementById('quest-title').value;
            const description = document.getElementById('quest-description').value;
            const xp = parseInt(document.getElementById('quest-xp').value) || 100;
            const timeLimit = parseInt(document.getElementById('quest-time').value) || 30;
            const category = document.getElementById('quest-category').value;
            
            // Get selected stats
            const statCheckboxes = document.querySelectorAll('input[name="stats"]:checked');
            const stats = Array.from(statCheckboxes).map(cb => cb.value);

            if (title && description) {
                const newQuest = {
                    id: Date.now().toString(),
                    title,
                    description,
                    xp,
                    timeLimit,
                    category,
                    stats,
                    completed: false
                };

                player.quests.push(newQuest);
                localStorage.setItem('player', JSON.stringify(player));
                
                // Show success message with Solo Leveling style
                showQuestCreatedAnimation(newQuest);
                
                // Navigate to quests page
                navigateTo('quests');
            } else {
                alert('Please fill in the title and description fields.');
            }
        }

        function showQuestCreatedAnimation(quest) {
            // Create floating text
            const floatingText = document.createElement('div');
            floatingText.textContent = 'NEW QUEST CREATED';
            floatingText.classList.add('solo-text');
            floatingText.style.position = 'fixed';
            floatingText.style.top = '50%';
            floatingText.style.left = '50%';
            floatingText.style.transform = 'translate(-50%, -50%)';
            floatingText.style.color = '#00b7ff';
            floatingText.style.fontSize = '2rem';
            floatingText.style.fontWeight = 'bold';
            floatingText.style.textShadow = '0 0 10px rgba(0, 183, 255, 0.7)';
            floatingText.style.zIndex = '100';
            floatingText.style.opacity = '0';
            floatingText.style.pointerEvents = 'none';
            
            document.body.appendChild(floatingText);
            
            // Animate
            floatingText.animate([
                { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
                { opacity: 1, transform: 'translate(-50%, -50%) scale(1.2)' },
                { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
                { opacity: 0, transform: 'translate(-50%, -50%) scale(1.5)' }
            ], {
                duration: 2000,
                easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)'
            });
            
            // Create magic particles
            createMagicParticles(floatingText, 30);
            
            // Remove after animation
            setTimeout(() => {
                floatingText.remove();
            }, 2000);
        }

        function selectRewardIcon(element) {
            // Remove selected class from all icons
            document.querySelectorAll('.reward-icon-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            // Add selected class to clicked icon
            element.classList.add('selected');
            
            // Update hidden input
            document.getElementById('reward-icon').value = element.dataset.icon;
            
            // Update preview
            updateRewardPreview();
        }

        function updateRewardPreview() {
            const title = document.getElementById('reward-title').value || 'Reward Title';
            const description = document.getElementById('reward-description').value || 'Reward description';
            const cost = document.getElementById('reward-cost').value || '100';
            const icon = document.getElementById('reward-icon').value;
            
            document.getElementById('preview-title').textContent = title;
            document.getElementById('preview-description').textContent = description;
            document.getElementById('preview-cost').textContent = `${cost} XP`;
            
            // Update icon
            const previewIcon = document.getElementById('preview-icon');
            previewIcon.setAttribute('data-lucide', icon);
            lucide.createIcons();
        }

        function createNewReward() {
            const title = document.getElementById('reward-title').value;
            const description = document.getElementById('reward-description').value;
            const cost = parseInt(document.getElementById('reward-cost').value) || 100;
            const icon = document.getElementById('reward-icon').value;

            if (title && description) {
                const newReward = {
                    id: Date.now().toString(),
                    title,
                    description,
                    cost,
                    icon,
                    custom: true
                };

                player.rewards.push(newReward);
                localStorage.setItem('player', JSON.stringify(player));
                
                // Show success message
                showRewardCreatedAnimation();
                
                // Navigate to rewards page
                navigateTo('rewards');
            } else {
                alert('Please fill in the title and description fields.');
            }
        }

        function showRewardCreatedAnimation() {
            // Similar to quest created animation
            const floatingText = document.createElement('div');
            floatingText.textContent = 'NEW REWARD CREATED';
            floatingText.classList.add('solo-text');
            floatingText.style.position = 'fixed';
            floatingText.style.top = '50%';
            floatingText.style.left = '50%';
            floatingText.style.transform = 'translate(-50%, -50%)';
            floatingText.style.color = '#00b7ff';
            floatingText.style.fontSize = '2rem';
            floatingText.style.fontWeight = 'bold';
            floatingText.style.textShadow = '0 0 10px rgba(0, 183, 255, 0.7)';
            floatingText.style.zIndex = '100';
            floatingText.style.opacity = '0';
            floatingText.style.pointerEvents = 'none';
            
            document.body.appendChild(floatingText);
            
            // Animate
            floatingText.animate([
                { opacity: 0, transform: 'translate(-50%, -50%) scale(0.5)' },
                { opacity: 1, transform: 'translate(-50%, -50%) scale(1.2)' },
                { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
                { opacity: 0, transform: 'translate(-50%, -50%) scale(1.5)' }
            ], {
                duration: 2000,
                easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)'
            });
            
            // Create magic particles
            createMagicParticles(floatingText, 30);
            
            // Remove after animation
            setTimeout(() => {
                floatingText.remove();
            }, 2000);
        }

        function changeTheme(theme) {
            // Update selected theme in UI
            document.querySelectorAll('.theme-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            document.querySelector(`.theme-option[onclick="changeTheme('${theme}')"]`).classList.add('selected');
            
            // Update player settings
            if (!player.settings) {
                player.settings = {};
            }
            
            player.settings.theme = theme;
            
            // Apply theme changes (would need CSS variables for full implementation)
            // This is a placeholder for actual theme implementation
        }

        function saveSettings() {
            if (!player.settings) {
                player.settings = {};
            }
            
            // Get settings from UI
            player.settings.animations = document.getElementById('animations-toggle').checked;
            player.settings.notifications = document.getElementById('notifications-toggle').checked;
            
            // Save to localStorage
            localStorage.setItem('player', JSON.stringify(player));
            
            // Show success message
            alert('Settings saved successfully!');
        }

        function exportPlayerData() {
            const dataStr = JSON.stringify(player);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'life-rpg-data.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function importPlayerData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        
                        // Validate data structure
                        if (importedData.name && importedData.level && importedData.stats) {
                            player = importedData;
                            localStorage.setItem('player', JSON.stringify(player));
                            
                            // Update UI
                            updateHeaderInfo();
                            renderPage(document.querySelector('.nav-icon.bg-\\[\\#00b7ff\\]\\/20').dataset.page);
                            
                            alert('Data imported successfully!');
                        } else {
                            alert('Invalid data format. Please use a valid Life RPG data file.');
                        }
                    } catch (error) {
                        alert('Error importing data: ' + error.message);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        function resetPlayerData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone!')) {
                localStorage.removeItem('player');
                showIntroScreen();
            }
        }

        // Initialize the application
        init();
    </script>
</body>
</html>